# ZKS Protocol Security Analysis: Who Sees What?

You asked: *"Can ISP see what site visited? Can Cloudflare? Can Oracle?"*

Here is the breakdown of the **Zero Knowledge Swarm (ZKS)** security model.

## 1. The Traffic Flow

```mermaid
graph LR
    User[Your PC] -- "Encrypted Tunnel" --> ISP1[Your ISP]
    ISP1 --> CF[Cloudflare Relay]
    CF -- "Encrypted Tunnel" --> Oracle[Oracle Exit Peer]
    Oracle -- "Decrypted Traffic" --> Internet[Target Website]
```

## 2. Who Sees What?

| Entity | What They See | Can They See the Website? |
| :--- | :--- | :--- |
| **Your ISP** | Encrypted WebSocket traffic to `zks-tunnel-relay.workers.dev`. | **NO**. They only know you are talking to Cloudflare. |
| **Cloudflare** | Encrypted binary blobs being passed between You and Oracle. | **NO**. They cannot decrypt the data (see below). |
| **Oracle Cloud** | The final request (e.g., "GET google.com"). | **YES**. The Exit Peer *must* decrypt to talk to the internet. |
| **Target Website** | Incoming connection from Oracle Cloud IP. | **NO**. They don't know your real IP. |

### ðŸš¨ Important Note on Oracle Cloud
Since the **Exit Peer** (Oracle VM) is the point where traffic exits to the internet, it *must* see the destination to forward the packets.
*   **Trust Model**: You own the Oracle VM. You are the "VPN Provider". You trust yourself.
*   **Oracle's View**: Oracle (the infrastructure provider) can see that your VM is talking to Google. This is unavoidable for *any* VPN (AWS sees AWS VPN traffic, DigitalOcean sees theirs).
*   **Advantage**: You are not sharing a server with thousands of others. No "no-logs" policy to trustâ€”you control the logs.

## 3. The Power of ZKS: Double-Key Vernam Cipher

This is where ZKS is revolutionary. Most VPNs use AES encryption. If someone steals the key or uses a quantum computer, they can decrypt it.

**ZKS uses the Vernam Cipher (One-Time Pad), which is mathematically unbreakable.**

### How it works:
$$ Ciphertext = Plaintext \oplus Key_{Local} \oplus Key_{Remote} $$

1.  **Key 1 (Local)**: Generated on your PC (CSPRNG).
2.  **Key 2 (Remote)**: Generated by Cloudflare LavaRand (Physical Entropy).

### Why Cloudflare Can't Spy:
*   Cloudflare has **Key 2** (they generated it).
*   But they **do not have Key 1** (it never leaves your PC).
*   To decrypt, you need **BOTH** keys.
*   $ Plaintext = Ciphertext \oplus Key_{Local} \oplus Key_{Remote} $
*   Without `Key_Local`, the data is mathematically indistinguishable from random noise.

### Why It's "Unbreakable":
Even with **infinite computing power** (Quantum Computers, AI), you cannot break a One-Time Pad. If you try every possible key, you will get every possible message of that length. You have no way of knowing which one is the real message.

## Summary

*   **Privacy**: Your ISP sees nothing. Cloudflare sees nothing.
*   **Anonymity**: Websites see Oracle's IP, not yours.
*   **Security**: The tunnel is protected by Information-Theoretic Security (stronger than military-grade AES).
*   **Trust**: You only need to trust the Exit Peer (which you own).

**ZKS turns the "Cloud" (Cloudflare) into a blind courier.** They carry the briefcase, but they don't have the key to open it.
